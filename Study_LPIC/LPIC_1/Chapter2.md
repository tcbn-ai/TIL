# 2. Linux のインストールとパッケージ管理
## 2.1 ハードディスクのレイアウト設計
### 2.1.1 Linux インストールに必要なパーティション
ハードディスク，SSD は，**パーティション** という区画に分割して使うことができる．
Linux をインストールするためには，少なくとも次の2つのパーティションが必要になる．

- ルートファイルシステムに割り当てるルートパーティション
- スワップ領域

実際には，さらにいくつかのパーティションに分割する．

- 柔軟なシステム管理のため
- ディスクに障害が発生したときの被害を抑えるため
- 障害発生時にスムーズな復旧作業をするため

以下に示すディレクトリ群は，独立したパーティションに割り当てるのが一般的．

- `/home`
    - 一般ユーザが利用するファイルが格納される．
    - 多数のユーザが利用するシステムの場合は，専用のパーティションに分割する必要がある．
- `/var`
    - 各種ログファイルなど，更新頻度の高いファイルが格納される．
    - ログが大量に生成されログファイルが肥大化すると，ファイルシステムの容量を超えてしまう可能性がある．
        - `/var` を別パーティションにすることで，被害がシステム全体に及ぶ危険を減らすことができる．
- `/usr`
    - プログラムやライブラリ，ドキュメントが置かれる．
        - `/usr` を別パーティションにしていると，システムが正常に起動できなくなる場合がある．
    - NFS を使ってコマンドやプログラムを共有する場合は，`/usr` を読み込み専用でマウントしておくことでセキュリティを高めることができる．
- `/boot`
    - システムによっては，ディスクの先頭パーティションとして数百MB程度を `/boot` パーティションに割り当てたほうが良い場合がある．
        - e.g. RAID (複数のハードディスクを組み合わせる使用方法) を利用する場合，内蔵パーティションに `/boot` パーティションが必要とされることがある．
- EFI システムパーティション (ESP)
    - UEFI を使ったシステムでは，FAT ファイルシステムでフォーマットされた ESP が必要．
    - OS のブートローダやデバイスドライバなどが格納される．
- スワップ領域
    - 仮想メモリ領域として利用される．
        - 物理メモリが不足した場合に，ディスクの一部を一時的にメモリの延長として使うことができるようにする機能．
    - サイズの目安は，搭載されている物理メモリの 1 - 2 倍．
        - 十分な物理メモリを搭載していれば，スワップ領域を使わないようにすることもできる．
- `/` (ルート)
    - 上記以外は，ルートファイルシステム (`/` ディレクトリが格納されたパーティション) になる．
    - ファイルシステムに障害が発生したときの復旧を容易にするためにも，できるだけ小さくしたほうが良い

### 2.1.2 パーティションのレイアウト設計
ディスクのパーティションレイアウトを設計する場合に考慮すべき点:

- システムの用途
- ディスクの容量
- バックアップの方法

最近は，LVM (論理ボリューム管理) を使った柔軟なディスク管理が行われるようになってきている．

- LVM
    - パーティション上にそのままファイルシステムを作成するのではなく，ボリュームグループという仮想ディスクを作成し，その上に仮想的なパーティションを作成する仕組み．

<div style="page-break-before:always"></div>


## 2.2 ブートローダのインストール
- **ブートローダ**
    - ハードディスクなどのストレージからOSを読み込んで起動するプログラム．
    - 代表的な Linux のブートローダは，GRUB．

### 2.2.1 GRUB のインストール
GRUB の特徴

- 多数のファイルシステムを認識可能
- シェル機能を搭載し，コマンドによる高度な管理が可能

ブートローダとして GRUB をインストールするには，`grub-install` コマンドを実行する．

例: `/dev/sda` の MBR 領域に GRUB をインストール:
```
grub-install /dev/sda
```